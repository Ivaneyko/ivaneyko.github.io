(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){e.exports=a(246)},101:function(e,t,a){},117:function(e,t,a){},246:function(e,t,a){"use strict";a.r(t);a(101);var n=a(0),r=a.n(n),c=a(34),l=a.n(c),s=a(29),i=a(35),o=a(13),u=a(14),m=a(17),f=a(15),d=a(16),p=a(22),E=a(32),h=function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row justify-content-center m-5"},r.a.createElement("div",{className:"col-6 col-sm-4"},r.a.createElement(E.a,{to:"/case-files/1",className:"btn btn-primary btn-block btn-sm",role:"link"},"Rosado"))))},b=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(n.Component),g=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(n.Component),v={FETCH_FILES_REQUEST:"[Case] Fetch files request",FETCH_FILES_SUCCESS:"[Case] Fetch files success",FETCH_FILE_BY_ID_REQUEST:"[Case] Fetch file by id request",FETCH_FILE_BY_ID_SUCCESS:"[Case] Fetch file by id success",FAILURE:"[File] Failure"},O=function(e){return{type:v.FETCH_FILES_SUCCESS,payload:e}},j=function(e){return{type:v.FETCH_FILE_BY_ID_SUCCESS,payload:e}},y=function(e){return{type:v.FAILURE,payload:e}},F=(a(117),function(){return r.a.createElement("div",{className:"ProgressBar"},r.a.createElement("div",{className:"indeterminate"}))}),C=a(30),_=a(21),k=a(96),N=a(250),T=a(248),S=a(249),w=function(e){var t=e.isOpen,a=e.onToggle,n=e.filesByYear;return r.a.createElement(N.a,{size:"lg",isOpen:t,toggle:a},r.a.createElement(T.a,null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"File"),r.a.createElement("th",{scope:"col"},"Pages"))),r.a.createElement("tbody",null,n.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.fileName),r.a.createElement("td",{className:"_value"},e.pages.join(", ")))})))),r.a.createElement(S.a,null,r.a.createElement("button",{className:"btn btn-sm btn-default",type:"button",onClick:a},"Close")))},I=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={data:{},filesByYear:[],isOpen:!1},a.handleElementsClick=a.handleElementsClick.bind(Object(_.a)(Object(_.a)(a))),a.handleToggle=a.handleToggle.bind(Object(_.a)(Object(_.a)(a))),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.caseFiles,t=this.filesToAttrs(e),a=this.attrsToYearsAndPages(t);this.setState({attrs:t,years:a,data:{labels:a.map(function(e){return e.year}),datasets:[{label:"Years",backgroundColor:"rgba(255,99,132,0.2)",borderColor:"rgba(255,99,132,1)",borderWidth:1,hoverBackgroundColor:"rgba(255,99,132,0.4)",hoverBorderColor:"rgba(255,99,132,1)",data:a.map(function(e){return e.pages.length})}]}})}},{key:"handleElementsClick",value:function(e){var t=this.state,a=t.attrs,n=t.years;if(e.length){var r=n[e[0]._index].year;this.setState({isOpen:!0,filesByYear:this.attrsToFilesAndPages(a,r)})}}},{key:"handleToggle",value:function(){this.setState({isOpen:!1,filesByYear:[]})}},{key:"filesToAttrs",value:function(e){return e.map(function(e){return e.attributes.map(function(t){return Object.assign({},t,{fileName:e.file.name,fileId:e.file.id})})}).reduce(function(e,t){return e.concat(t)})}},{key:"attrsToYearsAndPages",value:function(e){var t=[],a=new Map,n=function(n){var r=e[n],c=new Date(r.attribute.value).getFullYear();a.has(c)?t.map(function(e){return e.year===c&&(e.pages=Object(C.a)(e.pages).concat(Object(C.a)(r.pages).map(function(e){return"".concat(r.fileId,":").concat(e)})).filter(function(e,t,a){return a.indexOf(e)===t})),e}):(a.set(c,!0),t.push({pages:r.pages.map(function(e){return"".concat(r.fileId,":").concat(e)}),year:c}))};for(var r in e)n(r);return t}},{key:"attrsToFilesAndPages",value:function(e,t){var a=[],n=new Map,r=function(r){var c=e[r],l=new Date(c.attribute.value).getFullYear();t===l&&(n.has(c.fileId)?a.map(function(e){return e.fileId===c.fileId&&(e.pages=Object(C.a)(e.pages).concat(Object(C.a)(c.pages)).filter(function(e,t,a){return a.indexOf(e)===t}).sort(function(e,t){return e-t})),e}):(n.set(c.fileId,!0),a.push({fileId:c.fileId,fileName:c.fileName,pages:c.pages})))};for(var c in e)r(c);return a}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.isOpen,n=e.filesByYear;return r.a.createElement("div",{className:"area-container",style:{height:"800px"}},r.a.createElement(k.a,{data:t,options:{maintainAspectRatio:!1},onElementsClick:this.handleElementsClick}),r.a.createElement(w,{isOpen:a,onToggle:this.handleToggle,filesByYear:n}))}}]),t}(n.Component),x=function(e){var t=e.data;return r.a.createElement("tr",null,r.a.createElement("td",null,t.file.name),r.a.createElement("td",null,t.status),r.a.createElement("td",null,t.numberOfPages),r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement(E.a,{to:"/file-details/".concat(t.file.id),className:"btn btn-primary btn-sm"},"Details")))},B=function(e){var t=e.caseFiles;return r.a.createElement("div",{className:"area-container"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"File"),r.a.createElement("th",{scope:"col"},"Status"),r.a.createElement("th",{scope:"col"},"Pages"),r.a.createElement("th",{scope:"col"},"Date"),r.a.createElement("th",{scope:"col"},"Actions"))),r.a.createElement("tbody",null,t.map(function(e,t){return r.a.createElement(x,{data:e,key:t})}))))},L=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={pageLoading:!0},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.props.fetchFiles(),setTimeout(function(){e.setState({pageLoading:!1})},2e3)}},{key:"render",value:function(){var e=this.props.caseFiles,t=this.state.pageLoading;return r.a.createElement(n.Fragment,null,t?r.a.createElement(F,null):r.a.createElement("div",{className:"area area-page"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement(I,{caseFiles:e}),r.a.createElement(B,{caseFiles:e}))))}}]),t}(n.Component),D=Object(s.c)(function(e){return{caseFiles:e.case.caseFiles}},function(e){return{fetchFiles:function(){return e({type:v.FETCH_FILES_REQUEST})}}})(L),Y=a(11),U=function(e){var t=e.file,a=[],c=new Map,l=function(e){var n=t.attributes[e],r=new Date(n.attribute.value),l=r.getFullYear();c.has(l)?a.map(function(e){return e.year===l&&(e.pages=Object(C.a)(e.pages).concat(Object(C.a)(n.pages)).filter(function(e,t,a){return a.indexOf(e)===t}).sort(function(e,t){return e-t})),e}):(c.set(l,!0),a.push({pages:n.pages,year:l,date:r,name:n.attribute.name||"-",text:n.attribute.text||"-"}))};for(var s in t.attributes)l(s);return r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Date"),r.a.createElement("th",{scope:"col"},"Name"),r.a.createElement("th",{scope:"col"},"Text"),r.a.createElement("th",{scope:"col"},"Page(s)"))),r.a.createElement("tbody",null,a.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",{style:{whiteSpace:"nowrap"}},"".concat(e.date.getFullYear(),"-").concat(e.date.getMonth(),"-").concat(e.date.getDate())),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.text),r.a.createElement("td",{className:"_value"},e.pages.join(", ")))}))))},R=function(e){var t=e.file,a=[],n=t.attributes.map(function(e){return e.pages.map(function(e){return e})}).reduce(function(e,t){return e.concat(t)}).filter(function(e,t,a){return a.indexOf(e)===t}).sort(function(e,t){return e-t});for(var c in n){var l=n[c],s=[];for(var i in t.attributes){var o=t.attributes[i],u=o.attribute.value;-1!==o.pages.indexOf(l)&&s.push(u)}a.push({page:l,years:s})}return r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Page"),r.a.createElement("th",{scope:"col"},"Date(s)"))),r.a.createElement("tbody",null,a.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.page),r.a.createElement("td",{className:"_value"},e.years.join(", ")))})))},H=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleChangeTable=function(e){return function(){a.setState({activeTable:e})}},a.state={pageLoading:!0,activeTable:1},a.handleBack=a.handleBack.bind(Object(_.a)(Object(_.a)(a))),a.handleChangeTable=a.handleChangeTable.bind(Object(_.a)(Object(_.a)(a))),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.match;this.props.fetchFileById(t.params.id),setTimeout(function(){e.setState({pageLoading:!1})},2e3)}},{key:"handleBack",value:function(){this.props.goBack()}},{key:"render",value:function(){var e=this.state,t=e.pageLoading,a=e.activeTable,c=this.props.fileDetails;return r.a.createElement(n.Fragment,null,t?r.a.createElement(F,null):r.a.createElement("div",{className:"area area-page"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-sm",type:"button",onClick:this.handleBack},r.a.createElement("i",{className:"fa fa-chevron-left","aria-hidden":"true",style:{marginRight:"4px"}}),"Back")),r.a.createElement("div",{className:"area-container"},r.a.createElement("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons"},r.a.createElement("label",{className:"btn btn-secondary ".concat(1===a?"active":""),onClick:this.handleChangeTable(1)},r.a.createElement("input",{type:"radio",name:"options",id:"option1",autoComplete:"off",defaultChecked:1===a}),"Per date"),r.a.createElement("label",{className:"btn btn-secondary ".concat(2===a?"active":""),onClick:this.handleChangeTable(2)},r.a.createElement("input",{type:"radio",name:"options",id:"option2",autoComplete:"off",defaultChecked:2===a}),"Per page")),r.a.createElement("h4",{className:"mb-4 mt-4"},c.file.name),1===a&&r.a.createElement(U,{file:c}),2===a&&r.a.createElement(R,{file:c})))))}}]),t}(n.Component),A=Object(s.c)(function(e){return{fileDetails:e.case.fileDetails}},function(e){return{fetchFileById:function(t){return e(function(e){return{type:v.FETCH_FILE_BY_ID_REQUEST,payload:e}}(t))},goBack:function(){return e(Object(Y.c)())}}})(H),P=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Not found")}}]),t}(n.Component),M=function(){return r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:h}),r.a.createElement(p.a,{path:"/auth",component:b}),r.a.createElement(p.a,{path:"/case-list",component:g}),r.a.createElement(p.a,{path:"/case-files/:id",component:D}),r.a.createElement(p.a,{path:"/file-details/:id",component:A}),r.a.createElement(p.a,{component:P}))},Q=function(){return r.a.createElement("header",{className:"root-header"},r.a.createElement("nav",{className:"navbar"},r.a.createElement(E.a,{to:"/",className:"navbar-brand",role:"link"},"Shimlaw")))},W=function(){return r.a.createElement("footer",{className:"root-footer"},r.a.createElement("span",{className:"footer-copy"},"\xa9 ",(new Date).getFullYear()," All rights reserved"))},X=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Q,null),r.a.createElement("main",{className:"root-main"},r.a.createElement("div",{className:"root-main-container"},r.a.createElement(M,null))),r.a.createElement(W,null))}}]),t}(n.Component),q=a(19),J=a(25),V=a(99),z=a(93),$=a(26),G=a.n($),K=a(24),Z=a(66),ee=a.n(Z),te=function(e){if(e.response)throw e.response.data};function ae(){return ee()("/shimlaw.json").catch(te)}function ne(e){return console.log(e),ee()("/shimlaw.json").then(function(t){return t.data.find(function(t){return t.file.id===e})}).catch(te)}var re=G.a.mark(se),ce=G.a.mark(ie),le=G.a.mark(oe);function se(){var e;return G.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(K.b)(ae);case 3:return e=t.sent,t.next=6,Object(K.c)(O(e.data));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(K.c)(y(t.t0.message));case 12:case"end":return t.stop()}},re,this,[[0,8]])}function ie(e){var t;return G.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(K.b)(ne,e.payload);case 3:return t=a.sent,a.next=6,Object(K.c)(j(t));case 6:a.next=12;break;case 8:return a.prev=8,a.t0=a.catch(0),a.next=12,Object(K.c)(y(a.t0.message));case 12:case"end":return a.stop()}},ce,this,[[0,8]])}function oe(){return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.d)(v.FETCH_FILES_REQUEST,se);case 2:return e.next=4,Object(K.d)(v.FETCH_FILE_BY_ID_REQUEST,ie);case 4:case"end":return e.stop()}},le,this)}var ue=G.a.mark(me);function me(){return G.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(K.a)([oe()]);case 2:case"end":return e.stop()}},ue,this)}var fe={caseList:[],caseFiles:[],fileDetails:{},fetching:!1,fetched:!1,error:!1,errorMessage:""},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0,a=t.payload;switch(t.type){case v.FETCH_FILES_REQUEST:case v.FETCH_FILE_BY_ID_REQUEST:return pe(e);case v.FETCH_FILES_SUCCESS:return Ee(e,{caseFiles:a});case v.FETCH_FILE_BY_ID_SUCCESS:return Ee(e,{fileDetails:a});case v.FAILURE:return he(e,{errorMessage:a});default:return e}},pe=function(e){return Object.assign({},e,{fetching:!0,fetched:!1,error:!1,errorMessage:""})},Ee=function(e,t){return Object.assign({},e,t,{fetching:!1,fetched:!0})},he=function(e,t){return Object.assign({},e,{fetching:!1,error:!0,errorMessage:t})},be=function(e){return Object(J.c)({case:de,router:Object(i.b)(e)})},ge=Object(q.a)();Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),a=Object(V.a)(),n=Object(J.e)(be(ge),e,Object(J.d)(Object(J.a)(Object(z.a)(ge),a),t));return a.run(me),n}();l.a.render(r.a.createElement(s.a,{store:ve},r.a.createElement(i.a,{history:ge},r.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[100,1,2]]]);
//# sourceMappingURL=main.5e3762a7.chunk.js.map